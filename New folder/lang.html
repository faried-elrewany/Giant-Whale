<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./lang.css" />
  </head>
  <body>
    <!-- Language Select -->
    <div class="box-select-language">
      <div class="items-top-footer drop-down-key" onclick="toggleDropDown()">
        <img src="./assits/en-lng.svg" alt="" />
        <p id="selectedLanguage">ENG</p>
      </div>
      <div class="drop-down-language" data-role="language-switcher">
        <ul onclick="switchLanguage(event)">
          <li data-id="en">
            <img src="./assits/en-lng.svg" alt="" /><a href="#" class="selected"
              >ENG</a
            >
          </li>
          <li data-id="ar">
            <img src="./assits/ar-lng.svg" alt="" /><a href="#">AR</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="mobile-box" onclick="toggleMobileLanguage()">
      <div class="mobile-box-language">
        <img src="./assits/ar-lng.svg" alt="" id="mobileLanguageImage" />
      </div>
      <div class="mobile-box-whatsapp">
        <a href="#"><img src="./assits/whatsapp.svg" alt="" /></a>
      </div>
    </div>

    <script>
      let currentSelectedLanguage;

      function updateLanguage(langElement, imgSrc) {
        const languageText = langElement.textContent.trim();
        selectedLanguage.textContent = languageText;

        boxSelectLanguage.querySelector("img").src = mobileLanguageImage.src =
          imgSrc;
        document.body.dir = imgSrc.includes("ar-lng.svg") ? "rtl" : "ltr";
      }

      function switchLanguage(event) {
        const langElement = event.target;
        const imgSrc = langElement.parentElement.querySelector("img").src;
        updateLanguage(langElement, imgSrc);
        event.preventDefault();
      }

      function toggleMobileLanguage() {
        const currentSrc = mobileLanguageImage.src;
        const newSrc = currentSrc.includes("en-lng.svg")
          ? "./assits/ar-lng.svg"
          : "./assits/en-lng.svg";

        if (currentSelectedLanguage) {
          updateLanguage(currentSelectedLanguage, newSrc);
          mobileLanguageImage.src = newSrc;
        }

        currentSelectedLanguage = document.querySelector(
          ".drop-down-language li a.selected"
        );
      }

      function toggleDropDown() {
        dropDownLanguage.classList.toggle("active");
      }

      const selectedLanguage = document.getElementById("selectedLanguage");
      const boxSelectLanguage = document.querySelector(".box-select-language");
      const mobileLanguageImage = document.getElementById(
        "mobileLanguageImage"
      );
      const dropDownLanguage = document.querySelector(".drop-down-language");

      document.addEventListener("DOMContentLoaded", () => {
        currentSelectedLanguage = document.querySelector(
          ".drop-down-language li a.selected"
        );

        if (currentSelectedLanguage) {
          const imgSrc =
            currentSelectedLanguage.parentElement.querySelector("img").src;
          updateLanguage(currentSelectedLanguage, imgSrc);
        }
      });
    </script>
  </body>
</html>
